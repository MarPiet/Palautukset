{"version":3,"sources":["services/persons.js","components/App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Filter","props","value","onChange","PersonForm","onSubmit","addName","newName","handleNameChange","newNumber","handleNumberChange","type","Persons","personsToShow","map","person","i","key","name","setPersons","persons","setNewMessage","Person","number","onClick","deletePerson","window","confirm","personService","filter","setTimeout","App","useState","setNewName","setNewNumber","newFilter","setNewFilter","newMessage","useEffect","Notification","message","className","toLowerCase","includes","event","target","nameObject","preventDefault","length","newPerson","catch","error","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e203dd6a.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'             //'http://localhost:3001/persons **osa2' \r\n\r\n\r\nconst getAll =  () =>{\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteNumber = id =>{\r\n     return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst replaceNumber = newObject =>{\r\n    const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { \r\n    getAll,\r\n    create,\r\n    deleteNumber,\r\n    replaceNumber\r\n  }","import React, { useState, useEffect } from 'react'\r\nimport personService from '../services/persons'\r\n\r\nconst Filter = (props) => {\r\n        return(\r\n            <div>filter shown with: <input value={props.value} onChange={props.onChange}/></div>\r\n        )\r\n}\r\n\r\nconst PersonForm = (props) => {\r\n    return(\r\n        <form onSubmit={props.addName}>\r\n            <div>name: <input value={props.newName} onChange={props.handleNameChange} /></div>\r\n            <div>number: <input value={props.newNumber} onChange={props.handleNumberChange} /></div>\r\n            <div><button type=\"submit\">add</button></div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst Persons = (props) =>{\r\n  return(\r\n      props.personsToShow.map((person, i)=>\r\n      <Person person={person} key={person.name} setPersons={props.setPersons} persons={props.persons}setNewMessage={props.setNewMessage}/>)\r\n  ) \r\n}\r\n\r\nconst Person = (props) =>{\r\n    const handleDelete = deletePerson =>{\r\n      if(window.confirm(`Delete ${deletePerson.name} ?`)){\r\n          personService.deleteNumber(deletePerson.id)\r\n          props.setPersons(props.persons.filter(person => person.id !== deletePerson.id))\r\n          props.setNewMessage(\r\n            `Deleted ${deletePerson.name}`\r\n          )\r\n          setTimeout(() => {\r\n            props.setNewMessage(null)\r\n          }, 2000)\r\n      }\r\n    }\r\n\r\n    return(\r\n      <div>\r\n        {props.person.name} {props.person.number}\r\n        <button onClick= {() => handleDelete(props.person)}>delete</button>\r\n      </div>\r\n    )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([\r\n  ]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newFilter, setNewFilter ] = useState('')\r\n  const [ newMessage, setNewMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll('http://localhost:3001/persons')\r\n      .then(persons => {\r\n        setPersons(persons)\r\n      })\r\n  }, [])\r\n\r\n\r\n  const Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const addName = (event) =>{\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    } \r\n      event.preventDefault()\r\n      if(persons.filter(person => person.name === newName).length > 0)\r\n      {\r\n        if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\r\n            personService\r\n            .replaceNumber({...nameObject, id: persons.filter(person => person.name === newName)[0].id})\r\n            .then(newPerson =>{\r\n              setPersons(persons.map(person => person.id === newPerson.id ? newPerson : person)) \r\n              setNewMessage(\r\n                `Changed ${newName}'s number`\r\n              )\r\n              setTimeout(() => {\r\n                setNewMessage(null)\r\n              }, 2000)\r\n            })\r\n            .catch(error =>{\r\n              setNewMessage( `Person '${newName}' was already removed from server`)\r\n              setTimeout(() => {\r\n                setNewMessage(null)\r\n              }, 2000)\r\n            })\r\n        \r\n            return\r\n        }\r\n        else{\r\n          setNewName('')  \r\n          return\r\n        } \r\n      }\r\n    \r\n      personService\r\n      .create(nameObject)\r\n      .then(response =>{\r\n        setPersons(persons.concat(response))\r\n        setNewMessage(\r\n          `Added ${newName}`\r\n        )\r\n        setTimeout(() => {\r\n          setNewMessage(null)\r\n        }, 2000)\r\n        setNewName('')\r\n        setNewNumber('')\r\n      })\r\n      .catch(error => {\r\n        setNewMessage(  \r\n          error.response.data.error\r\n        )\r\n        setTimeout(() => {\r\n          setNewMessage(null)\r\n        }, 5000)\r\n      })\r\n  }\r\n\r\n  const handleNameChange = (event)  =>\r\n    setNewName(event.target.value)\r\n  \r\n  const handleNumberChange = (event)  =>\r\n    setNewNumber(event.target.value)\r\n  \r\n  const handleFilterChange = (event)  =>\r\n    setNewFilter(event.target.value)\r\n  \r\n  const personsToShow =  persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={newMessage} />\r\n      <Filter value={newFilter} onChange={handleFilterChange}/>\r\n      <h3>Add a new</h3>\r\n      <PersonForm addName={addName} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\r\n      <h3>Numbers</h3>\r\n      <Persons personsToShow={personsToShow} setPersons={setPersons} persons={persons} setNewMessage={setNewMessage}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}