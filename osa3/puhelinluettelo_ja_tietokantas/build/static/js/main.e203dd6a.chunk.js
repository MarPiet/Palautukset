(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),o=t.n(u),c=(t(20),t(14)),l=t(2),i=t(3),s=t.n(i),m="/api/persons",d=function(){return s.a.get(m).then((function(e){return e.data}))},f=function(e){return s.a.post(m,e).then((function(e){return e.data}))},h=function(e){return s.a.delete("".concat(m,"/").concat(e))},p=function(e){return s.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))},b=function(e){return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:e.value,onChange:e.onChange}))},v=function(e){return r.a.createElement("form",{onSubmit:e.addName},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},w=function(e){return e.personsToShow.map((function(n,t){return r.a.createElement(E,{person:n,key:n.name,setPersons:e.setPersons,persons:e.persons,setNewMessage:e.setNewMessage})}))},E=function(e){return r.a.createElement("div",null,e.person.name," ",e.person.number,r.a.createElement("button",{onClick:function(){return n=e.person,void(window.confirm("Delete ".concat(n.name," ?"))&&(h(n.id),e.setPersons(e.persons.filter((function(e){return e.id!==n.id}))),e.setNewMessage("Deleted ".concat(n.name)),setTimeout((function(){e.setNewMessage(null)}),2e3)));var n}},"delete"))},g=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),s=i[0],m=i[1],h=Object(a.useState)(""),E=Object(l.a)(h,2),g=E[0],N=E[1],C=Object(a.useState)(""),j=Object(l.a)(C,2),O=j[0],S=j[1],T=Object(a.useState)(null),k=Object(l.a)(T,2),P=k[0],y=k[1];Object(a.useEffect)((function(){d("http://localhost:3001/persons").then((function(e){u(e)}))}),[]);var M=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},D=t.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(M,{message:P}),r.a.createElement(b,{value:O,onChange:function(e){return S(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(v,{addName:function(e){var n={name:s,number:g};if(e.preventDefault(),t.filter((function(e){return e.name===s})).length>0)return window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))?void p(Object(c.a)({},n,{id:t.filter((function(e){return e.name===s}))[0].id})).then((function(e){u(t.map((function(n){return n.id===e.id?e:n}))),y("Changed ".concat(s,"'s number")),setTimeout((function(){y(null)}),2e3)})).catch((function(e){y("Person '".concat(s,"' was already removed from server")),setTimeout((function(){y(null)}),2e3)})):void m("");f(n).then((function(e){u(t.concat(e)),y("Added ".concat(s)),setTimeout((function(){y(null)}),2e3),m(""),N("")})).catch((function(e){y(e.response.data.error),setTimeout((function(){y(null)}),5e3)}))},newName:s,handleNameChange:function(e){return m(e.target.value)},newNumber:g,handleNumberChange:function(e){return N(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(w,{personsToShow:D,setPersons:u,persons:t,setNewMessage:y}))};o.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e203dd6a.chunk.js.map